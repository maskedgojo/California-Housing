<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Housing Value Prediction</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="{{ url_for('static', filename='style/predict.css') }}">
</head>
<body>

<!-- ================= NAVBAR ================= -->
<nav class="navbar navbar-expand-lg glass-nav px-4">
  <div class="container-fluid">
    <span class="navbar-brand fw-bold">California ML Dashboard</span>
    <a href="/" class="btn btn-outline-primary btn-sm nav-btn">Back to Home</a>
  </div>
</nav>

<!-- ================= HERO ================= -->
<section class="hero-section text-center">
  <div class="container">
    <h1 class="fade-up">Housing Value Prediction Dashboard</h1>
    <p class="fade-up delay-1">
      Enter socio-economic and geographic features to generate AI-powered insights.
    </p>
  </div>
</section>

<!-- ================= FORM SECTION ================= -->
<section class="prediction-section">
  <div class="container">
    <div class="glass-card p-5">
      <form method="POST">

        <div class="row g-4">

          <!-- Input Fields -->
          {% for field in ["MedInc","HouseAge","AveRooms","AveBedrms","Population","AveOccup","Latitude","Longitude"] %}
          <div class="col-md-6">
            <div class="form-floating">
              <input type="number" step="any" class="form-control custom-input"
                     name="{{ field }}" placeholder="{{ field }}" required>
              <label>{{ field }}</label>
            </div>
          </div>
          {% endfor %}

        </div>

        <!-- ================= MODEL SELECTION ================= -->
        <div class="mt-5">
          <label class="form-label fw-semibold mb-3">
            <i class="bi bi-cpu me-2"></i>
            Select Classification Model
          </label>

          <div class="row g-3">
            <div class="col-md-4">
              <div class="form-check model-option">
                <input class="form-check-input" type="radio" 
                       name="model" value="logistic" checked>
                <label class="form-check-label">
                  Logistic Regression
                </label>
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-check model-option">
                <input class="form-check-input" type="radio" 
                       name="model" value="decision_tree">
                <label class="form-check-label">
                  Decision Tree
                </label>
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-check model-option">
                <input class="form-check-input" type="radio" 
                       name="model" value="random_forest">
                <label class="form-check-label">
                  Random Forest
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="text-center mt-5">
          <button type="submit" class="btn btn-predict">
            <span>Generate AI Prediction</span>
            <div class="spinner-border spinner-border-sm ms-2 d-none" role="status"></div>
          </button>
        </div>

      </form>
    </div>
  </div>
</section>

<!-- ================= RESULT SECTION ================= -->
{% if predicted_price %}
<section class="result-section">
  <div class="container">
    <div class="glass-card result-card p-5 text-center fade-in">

      <div class="row g-4">

        <div class="col-md-3">
          <i class="bi bi-currency-dollar result-icon"></i>
          <h6>Predicted House Price</h6>
          <h2 class="result-number">${{ predicted_price }}</h2>
        </div>

        <div class="col-md-3">
          <i class="bi bi-bar-chart result-icon"></i>
          <h6>Predicted Category</h6>
          <span class="badge 
            {% if predicted_class == 'High' %}bg-success
            {% elif predicted_class == 'Medium' %}bg-info
            {% else %}bg-warning text-dark{% endif %}">
            {{ predicted_class }}
          </span>
        </div>

        <div class="col-md-3">
          <i class="bi bi-cpu result-icon"></i>
          <h6>Model Used</h6>
          <h5 class="text-primary">{{ model_name }}</h5>
        </div>

        <div class="col-md-3">
          <i class="bi bi-diagram-3 result-icon"></i>
          <h6>Cluster Group</h6>
          <h5 class="cluster-badge">{{ predicted_cluster }}</h5>
        </div>

      </div>

    </div>
  </div>
</section>
{% endif %}

<script>
  window.onload = function() {
    const result = document.querySelector(".result-section");
    if(result){
      result.scrollIntoView({behavior:"smooth"});
    }
  }
</script>

</body>
</html>